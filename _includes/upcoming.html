{% assign curdate = site.time | date: '%s' | minus: 86400 %}
<h3 id="upcoming">Upcoming {{artist.name}} shows</h3>
<div class="pull-right"><a href="{{artist.upcoming-shows-feed}}">Subscribe to a feed of upcoming {{artist.name}} shows </a></div>
<table class="table table-striped">
{% for show in shows %}{% assign showdate = show.date | date: '%s' %}{% assign showdate = showdate | plus: 0 %}{% if showdate >= curdate %}
{% assign day = show.date|date: "%-d" %}{% capture ordinaldate %}{% case day %}{% when '1' or '21' or '31' %}{{ day }}st{% when '2' or '22' %}{{ day }}nd{% when '3' or '23' %}{{ day }}rd{% else %}{{ day }}th{% endcase %} {{show.date|date: "%B %Y"}}{% endcapture %}

      <tr>
        <th class="col-md-4">{{ ordinaldate }}</th>
        <td class="col-md-8"><a href="{{ show.url | prepend: site.baseurl}}">{{ show.venue }}</a><br/>
          {% if show.cancelled %}<span class="badge text-bg-danger">Cancelled</span>{% endif %}
          {% if show.artistname %}<span class="badge text-bg-success">{{ show.artistname }}</span>
          {% else %}<span class="badge text-bg-success">{{ artist.name }}</span>
          {% endif %}
          {% if show.series %}<span class="badge text-bg-primary">{{ show.series }}</span>{% endif %}
        </td>
      </tr>{% endif %}{% endfor %}
</table>
{{ curdate }} == {{ showdate }}

